= [인증/인가] 메뉴
:toc:
:toc-title:

*[인증/인가]* 메뉴는 사용자의 신원을 확인하고, 접근 권한의 유무를 판단하는 인증 및 인가 방법을 관리할 수 있는 메뉴이다.
[width="100%",options="header", cols="1,3"]
|====================
|하위 메뉴|기능
|롤|리소스의 규칙을 정의하는 "롤"의 생성 및 조회
|롤 바인딩|사용자와 롤을 연결하는 "롤 바인딩"의 생성 및 조회
|롤 바인딩 클레임|롤 바인딩을 위한 요구 사항을 정의하는 "롤 바인딩 클레임"의 생성 및 조회
|서비스 계정|쿠버네티스가 직접 관리하는 사용자 계정인 "서비스 계정"의 생성 및 조회
|파드 보안 정책|파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 '파드 보안 정책'의 생성 및 조회
|====================

본 장에서는 하위 메뉴의 화면 구성과 기능에 대해서 설명한다.

== 롤

콘솔 메뉴에서 *[인증/인가]* -> *[롤]* 메뉴를 선택하면 *롤* 메인 화면으로 이동한다. +
*롤* 메인 화면에서는 리소스의 규칙을 정의하는 ``롤``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-role-main]
image::../images/figure_admin_role_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
롤을 생성하거나 롤 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 롤을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (종류)* +
롤의 종류를 선택해서 검색한다. 이때 다중선택도 가능하다.

* Cluster-wide Roles : 클러스터 전체적으로 조작 가능한 리소스의 규칙
* Namespace Roles : 네임스페이스 안에서 조작 가능한 리소스의 규칙
* System Roles : 시스템 내부적으로만 사용되는 리소스의 규칙

<4> *검색 조건 (레이블, 이름)* +
롤의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<5> *롤 목록* +
네임스페이스에 생성된 롤 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|롤의 이름이다. 이때 이름을 클릭하면 해당 롤의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|룰이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|image:../images/figure_action_icon.png[]|롤의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 롤 바인딩 추가 // (TD: 띄어쓰기 통일 필요): 롤 바인딩 생성
* 롤(또는 클러스터 롤) 수정 : YAML 에디터를 사용해 롤의 구성 정보를 수정
* 롤(또는 클러스터 롤) 삭제 : 롤을 삭제
|====================

== 롤 바인딩

콘솔 메뉴에서 *[인증/인가]* -> *[롤 바인딩]* 메뉴를 선택하면 *롤 바인딩* 메인 화면으로 이동한다. +
*롤 바인딩* 메인 화면에서는 리소스 사용자와 롤을 연결하는 ``롤 바인딩``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-role-binding-main]
image::../images/figure_admin_role_binding_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
롤 바인딩을 생성하거나 롤 바인딩 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 롤 바인딩을 폼 에디터를 사용해 생성한다. // (TD: 제픔의 버튼 이름 변경 필요 > 롤 바인딩 생성)//(QA: 바인딩 -> 롤 바인딩 생성수정 요청드렸습니다.)

<3> *검색 조건 (종류)* +
롤 바인딩의 종류를 선택해서 검색한다. 이때 다중선택도 가능하다.

* Cluster-wide Role Bindings : 클러스터 롤과 사용자 연결
* Namespace Role Bindings : 네임스페이스 롤과 사용자 연결
* System Role Bindings : 시스템 롤과 사용자 연결

<4> *검색 조건 (레이블, 이름)* +
롤 바인딩의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<5> *롤 바인딩 목록* +
네임스페이스에 생성된 롤 바인딩 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|롤 바인딩의 이름이다. 이때 이름을 클릭하면 해당 롤 바인딩의 상세 정보를 확인할 수 있는 화면이 열린다.
|ROLE REF|사용자에게 할당된 롤의 이름이다. 이때 이름을 클릭하면 해당 롤의 상세 정보를 확인할 수 있는 화면이 열린다.
|대상 유형|롤에 바인딩된 사용자의 종류이다.

* User : 일반 사용자
* Group : 사용자 그룹
* ServiceAccount : 서비스 계정
|대상 이름|롤에 바인딩된 사용자의 이름이다.
|네임스페이스|룰 바인딩이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|image:../images/figure_action_icon.png[]|롤 바인딩의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.


* Duplicate Role(또는 Cluster Role) Binding : // (TD: 메뉴 국문화 및 메뉴 설명 필요)(QA: 국문화 요청드렸습니다/ 설명:롤(또는 클러스터 롤)에 대한 롤 바인딩 복제)
* 롤(또는 클러스터 롤) 바인딩 수정 : YAML 에디터를 사용해 롤 바인딩의 구성 정보를 수정
* 롤(또는 클러스터 롤) 바인딩 삭제 : 롤 바인딩을 삭제
|====================

== 롤 바인딩 클레임

콘솔 메뉴에서 *[인증/인가]* -> *[롤 바인딩 클레임]* 메뉴를 선택하면 *롤 바인딩 클레임* 메인 화면으로 이동한다. +
*롤 바인딩 클레임* 메인 화면에서는 롤 바인딩을 위한 요구 사항을 정의하는 ``롤 바인딩 클레임``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-role-binding-claim-main]
image::../images/figure_admin_role_binding_claim_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
롤 바인딩 클레임을 생성하거나 롤 바인딩 클레임 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 롤 바인딩 클레임을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (레이블, 이름)* +
롤 바인딩 클레임의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<4> *롤 바인딩 클레임 목록* +
네임스페이스에 생성된 롤 바인딩 클레임 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|롤 바인딩 클레임의 이름이다. 이때 이름을 클릭하면 해당 롤 바인딩 클레임의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|룰 바인딩 클레임이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|상태|롤 바인딩 클레임의 현재 승인 상태 정보이다.

* Awaiting : 클레임에 대한 허가를 기다리는 상태
* Success : 클레임이 허가된 상태
* Reject : 클레임이 거절된 상태
|리소스 이름|롤 바인딩 클레임을 통해 실제 생성될 롤 바인딩의 이름이다.
|생성 시간|룰 바인딩 클레임이 생성된 시간이다.
|image:../images/figure_action_icon.png[]|롤 바인딩의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 어노테이션 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 롤 바인딩 클레임 수정 : YAML 에디터를 사용해 롤 바인딩 클레임의 구성 정보를 수정
* 롤 바인딩 클레임 삭제 : 롤 바인딩 클레임을 삭제
* 승인 처리 : 승인 대기(Awaiting) 상태인 롤 바인딩 클레임의 승인 여부를 선택

** Approved : 승인
** Rejected : 승인 거절
|====================

== 서비스 계정

콘솔 메뉴에서 *[인증/인가]* -> *[서비스 계정]* 메뉴를 선택하면 *서비스 계정* 메인 화면으로 이동한다. +
*서비스 계정* 메인 화면에서는 쿠버네티스가 직접 관리하는 사용자 계정인 ``서비스 계정``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-service-account-main]
image::../images/figure_admin_service_account_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
서비스 계정을 생성하거나 서비스 계정 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 서비스 계정을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (레이블, 이름)* +
서비스 계정의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<4> *서비스 계정 목록* +
네임스페이스에 생성된 서비스 계정을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|서비스 계정의 이름이다. 이때 이름을 클릭하면 해당 서비스 계정의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|서비스 계정이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|시크릿|서비스 계정의 인증 토근 정보를 저장하고 있는 시크릿의 개수이다.
|생성 시간|서비스 계정이 생성된 시간이다.
|image:../images/figure_action_icon.png[]|서비스 계정의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* Kubeconfig file 다운로드: 클러스터에 대한 접근을 구성하는데 사용되는 kubeconfig 파일을 다운로드
* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 어노테이션 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 서비스 계정 수정 : YAML 에디터를 사용해 서비스 계정의 구성 정보를 수정
* 서비스 계정 삭제 : 서비스 계정을 삭제
|====================

== 파드 보안 정책

콘솔 메뉴에서 *[보안]* -> *[파드 보안 정책]* 메뉴를 선택하면 *파드 보안 정책* 메인 화면으로 이동한다. +
*파드 보안 정책* 메인 화면에서는 파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 ``파드 보안 정책``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-pod-security-main]
image::../images/figure_admin_pod_security_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *생성 버튼* +
새로운 파드 보안 정책을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<2> *검색 조건 (레이블, 이름)* +
파드 보안 정책의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 '이름' 또는 '레이블'을 선택한 후 입력란에 검색어를 입력한다.

<3> *파드 보안 정책 목록* +
클러스터에 생성된 파드 보안 정책 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|파드 보안 정책의 이름이다. 이때 이름을 클릭하면 해당 파드 보안 정책의 상세 정보를 확인할 수 있는 화면이 열린다.
|권한이 부여된 // (TD: 올바른 국문으로 표현 필요 (권한 또는 특권))//(QA: 올바른 표현 요청 드렸습니다)|특권 모드의 사용 여부를 표시한다.

* True : 사용
* False : 사용 안 함
|보안 강화 리눅스 // (TD: 제품에는 '리녹스'로 표기)//(QA: 제품 표기 '리눅스'로 수정 요청)|SELinux의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* RunAsAny : 모두 허용
|사용자로 실행|컨테이너를 실행할 사용자 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MustRunAsNonRoot : Root가 아닌 사용자만 허용
* RunAsAny : 모두 허용
|파일스토리지 그룹|일부 볼륨에 적용되는 보충 그룹(Supplemental Group)의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|보충 그룹 // (TD: 제품에는 '보총'으로 표기)//(QA: 제품 표기 '보충'으로 수정 요청)|컨테이너가 추가할 그룹 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|image:../images/figure_action_icon.png[]|서비스 계정의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 어노테이션 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 파드 보안 정책 수정 : YAML 에디터를 사용해 파드 보안 정책의 구성 정보를 수정
* 파드 보안 정책 삭제 : 파드 보안 정책을 삭제
|====================

NOTE: 파드 보안 정책 제어는 어드미션 컨트롤러로 구현한다. (권장) +
어드미션 컨트롤러를 활성화하면 파드 보안 정책이 적용된다. 만약 정책을 승인하지 않고 활성화하면 클러스터에 파드가 생성되지 않는다. 따라서 기존 클러스터의 경우에는 어드미션 컨트롤러를 활성화하기 전에 정책을 추가하고 권한을 부여하는 것이 좋다. +
우선 kube-apiserver의 enable-adminssion-plugins 옵션에 PodSecurityPolicy를 추가하여 어드미션 컨트롤러를 활성화한다. 이후 RBAC(Role-Based Access Control)를 이용하여 생성된 파드 보안 정책으로 클러스터 롤을 생성하고, 생성된 클러스터 롤을 서비스 어카운트에 부여해서 정책을 적용할 수 있다.
