= [서비스 메시] 메뉴 (TD: GS 인증 제외)
:toc:
:toc-title:

*[서비스 메시]* 메뉴는 네트워크 트래픽을 관리할 수 있는 메뉴이다.
[width="100%",options="header", cols="1,3"]
|====================
|하위 메뉴|기능
|가상 서비스|지정한 호스트의 트래픽 동작을 확인할 수 있는 "가상 서비스"의 생성 및 조회 (QA: 트래픽 라우팅에 영향을 주는 설정인 "가상 서비스" 생성 및 조회)
|목적지 규칙|호스트에 발생하는 트래픽에 대한 작업을 설정하는 "목적지 규칙"의 생성 및 조회 (QA: 라우팅이 발생한 후 서비스를 대상으로 하는 트래픽에 적용되는 정책인 "목적지 규칙"의 생성 및 조회)
|엔보이 필터|특정 라우팅 규칙, 프로토콜, 특정 메시지 형식만 허용하도록 필터링을 설정하는 "엔보이 필터"의 생성 및 조회 (QA: 특정 필터를 추가하거나 특정 필드의 값을 수정하는 등 엔보이 구성을 사용자 지정할 수 있는 "엔보이 필터" 생성 및 조회)
|게이트웨이|인바운드 및 아웃바운드 트래픽을 관리하는 "게이트웨이"의 생성 및 조회 (QA: 들어오고 나가는 HTTP/TCP 연결에 대해 로드밸런서 역할 수행하는 "게이트웨이" 생성 및 조회)
|사이드카|연결된 워크로드 인스턴스에 대한 인바운드 및 아웃바운드 통신을 중재하기 위해 프록시 구성을 설정할 수 있는 "사이드카"의 생성 및 조회
|서비스 엔트리|서비스 속성(DNS 이름, VIP, 포트, 프로토콜, 엔드포인트)을 정의하는 "서비스 엔트리"의 생성 및 조회
|요청 인증|워크로드 인스턴스에 지원되는 요청 인증 방식을 지정할 수 있는 "요청 인증"의 생성 및 조회
|피어 인증|트래픽이 사이드카로 터널링되거나 터널링되지 않는 방식을 정의하는 "피어 인증"의 생성 및 조회
|인가 정책|메시의 워크로드에 대한 접근 제어를 관리하는 "인가 정책"의 생성 및 조회
|키알리|메시의 서비스 그래프 및 Istio 설정 정보를 확인
|====================

본 장에서는 하위 메뉴의 화면 구성과 기능에 대해서 설명한다.

== 가상 서비스

콘솔 메뉴에서 *[서비스 메시]* -> *[가상 서비스]* 메뉴를 선택하면 *가상 서비스* 메인 화면으로 이동한다. +
*가상 서비스* 메인 화면에서는 지정한 호스트의 트래픽 동작을 확인할 수 있는 `가상 서비스` 리소스를 생성 및 조회할 수 있다. (QA: 트래픽 라우팅에 영향을 주는 설정인 "가상 서비스")

//[caption="그림. "] //캡션 제목 변경
[#img-virtual-service-main]
image::../images/figure_admin_virtual_service_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
가상 서비스를 생성하거나 가상 서비스 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 가상 서비스를 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 가상 서비스 목록에서 조회할 가상 서비스의 이름을 입력한다.
<4> *가상 서비스 목록* +
네임스페이스에 생성된 가상 서비스 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|가상 서비스의 이름이다. 이때 이름을 클릭하면 해당 가상 서비스의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 가상 서비스를 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 가상 서비스 수정 : YAML 에디터를 사용해 가상 서비스의 구성 정보를 수정
* 가상 서비스 삭제 : 가상 서비스를 삭제
|네임스페이스|가상 서비스가 생성된 네임스페이스의 이름이다.
|호스트|트래픽이 전달되는 대상이다.
|GATEWAY|라우팅 규칙을 적용할 게이트웨이의 이름이다.
|생성 시간|가상 서비스가 생성된 시간이다.
|====================

== 목적지 규칙

콘솔 메뉴에서 *[서비스 메시]* -> *[목적지 규칙]* 메뉴를 선택하면 *목적지 규칙* 메인 화면으로 이동한다. +
*목적지 규칙* 메인 화면에서는 호스트에 발생하는 트래픽에 대한 작업을 설정하는 `목적지 규칙` 리소스를 생성 및 조회할 수 있다. (QA: 라우팅이 발생한 후 서비스를 대상으로 하는 트래픽에 적용되는 정책인 "목적지 규칙")

//[caption="그림. "] //캡션 제목 변경
[#img-destination-rule-main]
image::../images/figure_admin_destination_rule_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
목적지 룰을 생성하거나 목적지 룰 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 목적지 룰을 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 목적지 룰 목록에서 조회할 목적지 룰의 이름을 입력한다.
<4> *목적지 룰 목록* +
네임스페이스에 생성된 목적지 룰 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|목적지 룰의 이름이다. 이때 이름을 클릭하면 해당 목적지 룰의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 목적지 룰을 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 목적지 룰 수정 : YAML 에디터를 사용해 목적지 룰의 구성 정보를 수정
* 목적지 룰 삭제 : 목적지 룰을 삭제
|네임스페이스|목적지 룰이 생성된 네임스페이스의 이름이다.
|호스트|트래픽 정책이 적용될 대상이다.
|생성 시간|목적지 룰이 생성된 시간이다.
|====================

== 엔보이 필터

콘솔 메뉴에서 *[서비스 메시]* -> *[엔보이 필터]* 메뉴를 선택하면 *엔보이 필터* 메인 화면으로 이동한다. +
*엔보이 필터* 메인 화면에서는 특정 라우팅 규칙, 프로토콜, 특정 메시지 형식만 허용하도록 필터링을 설정하는 `엔보이 필터` 리소스를 생성 및 조회할 수 있다. (QA: 특정 필터를 추가하거나 특정 필드의 값을 수정하는 등 엔보이 구성을 사용자 지정할 수 있는 "엔보이 필터")

//[caption="그림. "] //캡션 제목 변경
[#img-envoy-filter-main]
image::../images/figure_admin_envoy_filter_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
엔보이 필터를 생성하거나 엔보이 필터 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 엔보이 필터를 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 엔보이 필터 목록에서 조회할 엔보이 필터의 이름을 입력한다.
<4> *엔보이 필터 목록* +
네임스페이스에 생성된 엔보이 필터 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|엔보이 필터의 이름이다. 이때 이름을 클릭하면 해당 엔보이 필터의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 엔보이 필터를 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 엔보이 필터 수정 : YAML 에디터를 사용해 엔보이 필터의 구성 정보를 수정
* 엔보이 필터 삭제 : 엔보이 필터를 삭제
|네임스페이스|엔보이 필터가 생성된 네임스페이스의 이름이다.
|생성 시간|엔보이 필터가 생성된 시간이다.
|====================

== 게이트웨이

콘솔 메뉴에서 *[서비스 메시]* -> *[게이트웨이]* 메뉴를 선택하면 *게이트웨이* 메인 화면으로 이동한다. +
*게이트웨이* 메인 화면에서는 인바운드 및 아웃바운드 트래픽을 관리하는 `게이트웨이` 리소스를 생성 및 조회할 수 있다. (QA: 들어오고 나가는 HTTP/TCP 연결에 대해 로드밸런서 역할 수행하는 "게이트웨이")

//[caption="그림. "] //캡션 제목 변경
[#img-gateway-main]
image::../images/figure_admin_gateway_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
게이트웨이를 생성하거나 게이트웨이 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 게이트웨이를 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 게이트웨이 목록에서 조회할 게이트웨이의 이름을 입력한다.
<4> *게이트웨이 목록* +
네임스페이스에 생성된 게이트웨이 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|게이트웨이의 이름이다. 이때 이름을 클릭하면 해당 게이트웨이의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 게이트웨이를 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 게이트웨이 수정 : YAML 에디터를 사용해 게이트웨이의 구성 정보를 수정
* 게이트웨이 삭제 : 게이트웨이를 삭제
|네임스페이스|게이트웨이가 생성된 네임스페이스의 이름이다.
|생성 시간|게이트웨이가 생성된 시간이다.
|====================

== 사이드카

콘솔 메뉴에서 *[서비스 메시]* -> *[사이드카]* 메뉴를 선택하면 *사이드카* 메인 화면으로 이동한다. +
*사이드카* 메인 화면에서는 연결된 워크로드 인스턴스에 대한 인바운드 및 아웃바운드 통신을 중재하기 위해 프록시 구성을 설정할 수 있는 `사이드카` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-sidecar-main]
image::../images/figure_admin_sidecar_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
사이드카를 생성하거나 사이드카 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 사이드카를 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 사이드카 목록에서 조회할 사이드카의 이름을 입력한다.
<4> *사이드카 목록* +
네임스페이스에 생성된 사이드카 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|사이드카의 이름이다. 이때 이름을 클릭하면 해당 사이드카의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 사이드카를 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 사이드카 수정 : YAML 에디터를 사용해 사이드카의 구성 정보를 수정
* 사이드카 삭제 : 사이드카를 삭제
|네임스페이스|사이드카가 생성된 네임스페이스의 이름이다.
|생성 시간|사이드카가 생성된 시간이다.
|====================

== 서비스 엔트리

콘솔 메뉴에서 *[서비스 메시]* -> *[서비스 엔트리]* 메뉴를 선택하면 *서비스 엔트리* 메인 화면으로 이동한다. +
*서비스 엔트리* 메인 화면에서는 서비스 속성(DNS 이름, VIP, 포트, 프로토콜, 엔드포인트)을 정의하는 `서비스 엔트리` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-service-entry-main]
image::../images/figure_admin_service_entry_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
서비스 엔트리를 생성하거나 서비스 엔트리 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 서비스 엔트리를 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 서비스 엔트리 목록에서 조회할 서비스 엔트리의 이름을 입력한다.
<4> *서비스 엔트리 목록* +
네임스페이스에 생성된 서비스 엔트리 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|서비스 엔트리의 이름이다. 이때 이름을 클릭하면 해당 서비스 엔트리의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 서비스 엔트리를 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 서비스 엔트리 수정 : YAML 에디터를 사용해 서비스 엔트리의 구성 정보를 수정
* 서비스 엔트리 삭제 : 서비스 엔트리를 삭제
|네임스페이스|서비스 엔트리가 생성된 네임스페이스의 이름이다.
|생성 시간|서비스 엔트리가 생성된 시간이다.
|====================

== 요청 인증

콘솔 메뉴에서 *[서비스 메시]* -> *[요청 인증]* 메뉴를 선택하면 *요청 인증* 메인 화면으로 이동한다. +
*요청 인증* 메인 화면에서는 워크로드 인스턴스에 지원되는 요청 인증 방식을 지정할 수 있는 `요청 인증` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-request-auth-main]
image::../images/figure_admin_request_auth_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
요청 인증을 생성하거나 요청 인증 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 요청 인증을 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 요청 인증 목록에서 조회할 요청 인증의 이름을 입력한다.
<4> *요청 인증 목록* +
네임스페이스에 생성된 요청 인증 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|요청 인증의 이름이다. 이때 이름을 클릭하면 해당 요청 인증의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 요청 인증을 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 요청 인증 수정 : YAML 에디터를 사용해 요청 인증의 구성 정보를 수정
* 요청 인증 삭제 : 요청 인증을 삭제
|네임스페이스|요청 인증이 생성된 네임스페이스의 이름이다.
|생성 시간|요청 인증이 생성된 시간이다.
|====================

== 피어 인증

콘솔 메뉴에서 *[서비스 메시]* -> *[피어 인증]* 메뉴를 선택하면 *피어 인증* 메인 화면으로 이동한다. +
*피어 인증* 메인 화면에서는 트래픽이 사이드카로 터널링되거나 터널링되지 않는 방식을 정의하는 `피어 인증` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-peer-auth-main]
image::../images/figure_admin_peer_auth_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
피어 인증을 생성하거나 피어 인증 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 피어 인증을 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 피어 인증 목록에서 조회할 피어 인증의 이름을 입력한다.
<4> *피어 인증 목록* +
네임스페이스에 생성된 피어 인증 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|피어 인증의 이름이다. 이때 이름을 클릭하면 해당 피어 인증의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 피어 인증을 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 피어 인증 수정 : YAML 에디터를 사용해 피어 인증의 구성 정보를 수정
* 피어 인증 삭제 : 피어 인증을 삭제
|네임스페이스|피어 인증이 생성된 네임스페이스의 이름이다.
|생성 시간|피어 인증이 생성된 시간이다.
|====================

== 인가 정책

콘솔 메뉴에서 *[서비스 메시]* -> *[인가 정책]* 메뉴를 선택하면 *인가 정책* 메인 화면으로 이동한다. +
*인가 정책* 메인 화면에서는 메시의 워크로드에 대한 접근 제어를 관리하는 `인가 정책` 리소스를 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-auth-policy-main]
image::../images/figure_admin_auth_policy_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
인가 정책을 생성하거나 인가 정책 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 인가 정책을 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 인가 정책 목록에서 조회할 인가 정책의 이름을 입력한다.
<4> *인가 정책 목록* +
네임스페이스에 생성된 인가 정책 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|인가 정책의 이름이다. 이때 이름을 클릭하면 해당 인가 정책의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 인가 정책을 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 인가 정책 수정 : YAML 에디터를 사용해 인가 정책의 구성 정보를 수정
* 인가 정책 삭제 : 인가 정책을 삭제
|네임스페이스|인가 정책이 생성된 네임스페이스의 이름이다.
|생성 시간|인가 정책이 생성된 시간이다.
|====================

== 키알리

콘솔 메뉴에서 *[서비스 메시]* -> *[키알리]* 메뉴를 선택하면 *키알리* 메인 화면으로 이동한다. +
*키알리* 메인 화면에서는 메시의 서비스 그래프 및 Istio 설정 정보를 확인할 수 있다. 키알리 툴의 사용 방법에 대한 자세한 설명은 link:https://kiali.io/documentation/latest/features/[키알리 설명서]를 참고한다.

//[caption="그림. "] //캡션 제목 변경
[#img-kiali-main]
image::../images/figure_admin_kiali_main.png[]

키알리에서 제공하는 주요 메뉴에 대한 설명은 다음과 같다.

* *Overview* +
네임스페이스 목록 조회
* *Graph* +
istio-proxy가 추가된 컨테이너의 트래픽 이동 그래프 조회
* *Applications* +
네임스페이스 내 istio-proxy가 추가된 애플리케이션 목록 조회
* *Workloads* +
애플리케이션의 워크로드 조회
* *Services* +
애플리케이션의 서비스 조회
* *Istio Config* +
Istio의 구성 정보(가상 서비스, 목적지 룰, 엔보이 필터, 게이트웨이, 사이드카, 서비스 엔트리, 요청 인증, 피어 인증, 인가 정책) 조회
