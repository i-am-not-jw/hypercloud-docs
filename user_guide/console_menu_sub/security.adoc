= [보안] 메뉴 (TD: GS 인증 제외)
:toc:
:toc-title:

*[보안]* 메뉴는 워크로드를 보호하기 위한 정책들을 관리할 수 있는 메뉴이다.
[width="100%",options="header", cols="1,3"]
(QA: 4버전에 있던 대메뉴가 5버전에서 쪼개져서 파드 보안 정책은 인증/인가 하위 메뉴로 네트워크 정책은 네트워크 하위 메뉴로 쪼개졌어요) 
|====================
|하위 메뉴|기능
|파드 보안 정책|파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 "파드 보안 정책"의 생성 및 조회
|네트워크 정책|파드로부터 들어오거나 나가는 트래픽을 통제하는 "네트워크 정책"의 생성 및 조회
|====================

본 장에서는 하위 메뉴의 화면 구성과 기능에 대해서 설명한다.

== 파드 보안 정책

콘솔 메뉴에서 *[보안]* -> *[파드 보안 정책]* 메뉴를 선택하면 *파드 보안 정책* 메인 화면으로 이동한다. +
*파드 보안 정책* 메인 화면에서는 파드의 생성 및 업데이트에 대한 세분화된 권한을 부여하는 ``파드 보안 정책``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-pod-security-main]
image::../images/figure_admin_pod_security_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *생성 버튼* +
새로운 파드 보안 정책을 YAML 에디터를 사용해 생성한다.
<2> *이름 검색* +
전체 파드 보안 정책 목록에서 조회할 파드 보안 정책의 이름을 입력한다.
<3> *파드 보안 정책 목록* +
클러스터에 생성된 파드 보안 정책 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|파드 보안 정책의 이름이다. 이때 이름을 클릭하면 해당 파드 보안 정책의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 파드 보안 정책을 삭제하거나 정보를 수정할 수 있다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 파드 보안 정책 수정 : YAML 에디터를 사용해 파드 보안 정책의 구성 정보를 수정
* 파드 보안 정책 삭제 : 파드 보안 정책을 삭제
|특권|특권 모드의 사용 여부를 표시한다.

* True : 사용
* False : 사용 안 함
|보안 강화 리눅스|SELinux의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* RunAsAny : 모두 허용
|사용자로 실행|컨테이너를 실행할 사용자 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MustRunAsNonRoot : Root가 아닌 사용자만 허용
* RunAsAny : 모두 허용
|파일스토리지 그룹|일부 볼륨에 적용되는 보충 그룹(Supplemental Group)의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|보충 그룹|컨테이너가 추가할 그룹 ID의 제어 범위를 표시한다.

* MustRunAs : 지정된 범위만 허용 (범위 지정 필수)
* MayRunAs : 범위를 지정한 경우 지정된 범위만 허용하고, 범위를 지정하지 않은 경우 모두 허용
* RunAsAny : 모두 허용
|생성 시간|파드 보안 정책이 생성된 시간이다.
|====================

NOTE: 파드 보안 정책 제어는 어드미션 컨트롤러로 구현한다. (권장) +
어드미션 컨트롤러를 활성화하면 파드 보안 정책이 적용된다. 만약 정책을 승인하지 않고 활성화하면 클러스터에 파드가 생성되지 않는다. 따라서 기존 클러스터의 경우에는 어드미션 컨트롤러를 활성화하기 전에 정책을 추가하고 권한을 부여하는 것이 좋다. +
우선 kube-apiserver의 enable-adminssion-plugins 옵션에 PodSecurityPolicy를 추가하여 어드미션 컨트롤러를 활성화한다. 이후 RBAC(Role-Based Access Control)를 이용하여 생성된 파드 보안 정책으로 클러스터 롤을 생성하고, 생성된 클러스터 롤을 서비스 어카운트에 부여해서 정책을 적용할 수 있다.

== 네트워크 정책

콘솔 메뉴에서 *[보안]* -> *[네트워크 정책]* 메뉴를 선택하면 *네트워크 정책* 메인 화면으로 이동한다. +
*네트워크 정책* 메인 화면에서는 파드로부터 들어오거나 나가는 트래픽을 통제하는 ``네트워크 정책``을 생성 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-network-main]
image::../images/figure_admin_network_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
네트워크 정책을 생성하거나 네트워크 정책 목록을 조회할 네임스페이스를 선택한다.
<2> *생성 버튼* +
새로운 네트워크 정책을 YAML 에디터를 사용해 생성한다.
<3> *이름 검색* +
전체 네트워크 정책 목록에서 조회할 네트워크 정책의 이름을 입력한다.
<4> *네트워크 정책 목록* +
네임스페이스에 생성된 네트워크 정책 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|네트워크 정책의 이름이다. 이때 이름을 클릭하면 해당 네트워크 정책의 상세 정보를 확인할 수 있는 화면이 열린다. +
또한 이름 왼쪽의 
image:../images/figure_action_icon.png[]
(설정) 아이콘을 클릭하면 해당 네트워크 정책을 삭제하거나 정보를 수정할 수 있다.

* 파드 선택기 수정 : 관리할 파드의 레이블을 추가, 삭제
* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 네트워크 정책 수정 : YAML 에디터를 사용해 네트워크 정책의 구성 정보를 수정
* 네트워크 정책 삭제 : 네트워크 정책을 삭제
|네임스페이스|네트워크 정책이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|파드 선택기|네트워크 정책을 통해 관리할 파드의 범위 또는 레이블 정보이다.
|====================

NOTE: 기본적으로 네트워크 정책이 없으면 해당 네임스페이스의 파드에 대한 모든 인그레스(수신)와 이그레스(송신) 트래픽이 허용되며, 네임스페이스에 특정 파드를 선택하는 네트워크 정책이 있으면 해당 파드는 네트워크 정책에서 허용하지 않는 모든 연결을 거부한다. +
만약 여러 개의 네트워크 정책에 하나의 파드가 선택된 경우에는 해당 정책들의 인그레스/이그레스 규칙을 통합하여 허용되는 범위로 파드가 제한된다.
